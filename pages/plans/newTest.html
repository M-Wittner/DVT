<div id="desc" ng-controller="newPlanCtrl" ng-init="test.priority = []; test.user = currentUser">
	<div class="panel-body">
		<div class="row">
			<div class="col-md-3">
				<span class="label label-dangerC">Station:</span>
				<ui-select style="min-width: 100%" multiple limit="1" close-on-select="false" ng-model="test.station" data-placeholder="Pick Test" ng-disabled="lock" ng-change="test.testType = []">
					<ui-select-match>{{$item.name}}</ui-select-match>
					<ui-select-choices repeat="station in testParams.params.workStations|filter: $select.search" sortable="true">{{station.name}}</ui-select-choices>
				</ui-select>
			</div>
			<div class="col-md-4">
				<span class="label label-dangerC">Test Name:</span>
				<div ng-if="test.station[0].idx">
					<ui-select style="min-width: 100%" multiple limit="1" close-on-select="false" ng-model="test.testType" data-placeholder="Pick Test" ng-disabled="lock" ng-change="test.sweeps = {}">
						<ui-select-match>{{$item.test_name}}</ui-select-match>
						<ui-select-choices repeat="test in testParams.params.testTypes | filter:{workstation_id: test.station[0].idx}|filter: $select.search" sortable="true">{{test.test_name}}</ui-select-choices>
					</ui-select>
				</div>
			</div>
			<div class="col-md-2">
				<span class="label label-dangerC">Test Priority</span>
				<ui-select style="min-width: 100%" multiple limit="1" close-on-select="false" ng-model="test.priority" data-placeholder="Pick Test" ng-disabled="lock">
						<ui-select-match>{{$item.value}}</ui-select-match>
						<ui-select-choices repeat="priority in testParams.params.priorityList">{{priority.display_name}}</ui-select-choices>
					</ui-select>
			</div>
		</div>
		<div ng-if="test.testType[0]" class="panel panel-default rowMarg">
			<div class="panel-heading" Data-toggle="collapse" data-target="#{{$id}}" aria-expanded="true" aria-controls="struct">
				Test Struct
			</div>
			<div class="collapse panel-body in" id="{{$id}}" aria-expanded="true">
				<div ng-repeat="(sweepName, sweepData) in testStructs | filter:{station_id: test.station[0].idx, test_type_id: test.testType[0].type_idx}:true | orderBy: 'priority' track by sweepData.name + $index" ng-init="sweepName = sweepData.name;">
					<!----------------------------------------------------------------			Sweeps			---------------------------------------------------------------->
					<div ng-if="sweepData.data_type == 10" class="col-md-3 rowMarg" allow-clear ng-init="test.sweeps[sweepName].data_type = sweepData.data_type; test.sweeps[sweepName].config_id = sweepData.config_id">
						<span class="label label-dangerC">{{sweepName}}</span>
						<div class="input-group" uib-popover="{{sweepData.tooltip}}" popover-trigger="'mouseenter'">
							<ui-select style="min-width: 100%" multiple limit="1" close-on-select="false" ng-model="test.sweeps[sweepName].data" data-placeholder="Pick Test" ng-disabled="lock">
								<ui-select-match>{{$item.display_name}}</ui-select-match>
								<ui-select-choices repeat="sweep in testParams.params.allParams |filter:{config_id: sweepData.config_id}:true|filter: $select.search" sortable="true">{{sweep.display_name}}</ui-select-choices>
							</ui-select>
							<span class="input-group-btn">
								<button type="button" ng-click="test.sweeps[sweepName].data = []" class="btn btn-default btn-sm" ng-disabled="lock">
									<span class="glyphicon glyphicon-trash"></span>
								</button>
								<button type="button" ng-click="selectAll(test, sweepData)" class="btn btn-default btn-sm" ng-disabled="lock" ng-if="sweepData.config_id != 19">
									<span class="glyphicon glyphicon-check"></span>
								</button>
							</span>
						</div>
					</div>
					<!----------------------------------------------------------------			Lineups			---------------------------------------------------------------->
					<div ng-if="sweepData.data_type == 33" class="rowMarg" ng-class="test.sweeps['Debug'] ? 'col-md-9' : 'col-md-12'" uib-popover="{{sweepData.tooltip}}" popover-trigger="'mouseenter'" ng-init="test.sweeps[sweepName].data.config_id = sweepData.config_id; test.sweeps[sweepName].data_type = sweepData.data_type; test.sweeps[sweepName].checkLineup = true">
						<span class="label label-dangerC">{{sweepName}}</span>
						<div class="input-group">
							<input class="form-control" type="text" placeholder="some text" ng-model="test.sweeps[sweepName].data.value" ng-disabled="lock">
							<span class="input-group-addon"><span class="glyphicon" ng-class="test.sweeps[sweepName].checkLineup == true ? 'glyphicon-eye-open check-seen' : 'glyphicon-eye-close'"></span> <input type="checkbox" ng-model="test.sweeps[sweepName].checkLineup" ng-disabled="lock"></span>
						</div>
					</div>
					<!----------------------------------------------------------------			Pins			---------------------------------------------------------------->
					<div ng-if="sweepData.data_type == 60 || sweepData.data_type == 62" class="col-md-5 rowMarg"  uib-popover="{{sweepData.tooltip}}" popover-trigger="'mouseenter'">
						<span class="label label-dangerC">{{sweepName}}</span>
						<div class="input-group input-group-sm" ng-init="test.sweeps[sweepName].config_id = sweepData.config_id; test.sweeps[sweepName].data_type = sweepData.data_type">
							<input class="form-control" type="number" placeholder="From" ng-model="test.sweeps[sweepName].data.from" aria-describedby="from" ng-disabled="lock">
							<span class="input-group-addon" id="from" style="font-weight:900">;</span>
							<input class="form-control" type="number" placeholder="Step" ng-model="test.sweeps[sweepName].data.step" aria-describedby="step" ng-disabled="lock">
							<span class="input-group-addon" id="step" style="font-weight:900">;</span>
							<input class="form-control" type="number" placeholder="To" ng-model="test.sweeps[sweepName].data.to" aria-describedby="to"  ng-disabled="lock">
							<span ng-if="sweepData.data_type == 60" class="input-group-addon" id="to" style="font-weight:900">;</span>
							<input ng-if="sweepData.data_type == 60" class="form-control" type="text" placeholder="Extra" ng-model="test.sweeps[sweepName].data.ext" uib-popover="Ex: -50,-55.5,-60" popover-trigger="'mouseenter'" ng-disabled="lock">
						</div>
					</div>
					<!----------------------------------------------------------------			Chips			---------------------------------------------------------------->
					<div ng-if="sweepData.data_type > 100" class="col-md-3 rowMarg" uib-popover="{{sweepData.tooltip}}" popover-trigger="'mouseenter'" ng-init="test.sweeps[sweepName].data_type = sweepData.data_type">
						<span class="label label-dangerC">{{sweepName}}</span>
						<div class="input-group">
							<ui-select style="min-width: 100%" multiple close-on-select="false" ng-model="test.sweeps[sweepName].data" data-placeholder="Pick Test" ng-disabled="lock">
								<ui-select-match>{{$item.chip_sn}}-{{$item.chip_process_abb}}</ui-select-match>
								<ui-select-choices repeat="chip in testParams.params.allChips |filter:{chip_type_id: sweepData.data_type - 100}|filter: $select.search" sortable="true" group-by="'chip_process_abb'">{{chip.chip_sn}}-{{chip.chip_process_abb}}</ui-select-choices>
							</ui-select>
							<span class="input-group-btn">
								<button type="button" ng-click="test.sweeps[sweepName].data = []" class="btn btn-default btn-sm" ng-disabled="lock">
									<span class="glyphicon glyphicon-trash"></span>
							</button>
							</span>
						</div>
					</div>
					<!----------------------------------------------------------------			DAC_Atten			---------------------------------------------------------------->
					<div ng-if="sweepData.data_type == 61" class="col-md-4 rowMarg" uib-popover="{{sweepData.tooltip}}" popover-trigger="'mouseenter'" ng-init="test.sweeps[sweepName].data_type = sweepData.data_type; test.sweeps[sweepName].data = []">
						<span class="label label-dangerC">{{sweepName}}</span>
						<div class="input-group input-group-sm">
							<input type="text" class="form-control" ng-model="test.sweeps[sweepName].data.name" ng-disabled="lock">
							<span class="input-group-btn">
								<label class="btn btn-default btn-sm" ng-disabled="lock" for="{{this.$id}}{{$index}}">
									<span class="glyphicon glyphicon-folder-open">
									</span>
									<input style="display: none;" id="{{this.$id}}{{$index}}" type="file"  import-sheet-js="{{this.$id}}" ng-model="test.sweeps[sweepName].fileData" ng-disabled="lock"/>
								</label>
								<button type="button" ng-click="loadData(test.sweeps[sweepName])" class="btn btn-default btn-sm" ng-disabled="lock">
									<span style="color: limegreen; font-size: 16px" class="glyphicon glyphicon-send"></span>
								</button>
								<button type="button" ng-click="test.sweeps[sweepName].data = []" class="btn btn-default btn-sm" ng-disabled="lock">
									<span class="glyphicon glyphicon-trash"></span>
								</button>
							</span>
						</div>
					</div>
					<!----------------------------------------------------------------			Sweeps			---------------------------------------------------------------->
					<div ng-if="sweepData.data_type != 33 && sweepData.data_type != 10 && sweepData.data_type < 60" class="col-md-3 rowMarg" allow-clear ng-init="test.sweeps[sweepName].data_type = sweepData.data_type; test.sweeps[sweepName].config_id = sweepData.config_id">
						<span class="label label-dangerC">{{sweepName}}</span>
						<div class="input-group" uib-popover="{{sweepData.tooltip}}" popover-trigger="'mouseenter'">
							<ui-select style="min-width: 100%" multiple close-on-select="false" ng-model="test.sweeps[sweepName].data" data-placeholder="Pick Test" ng-disabled="lock">
								<ui-select-match>{{$item.display_name}}</ui-select-match>
								<ui-select-choices repeat="sweep in testParams.params.allParams |filter:{config_id: sweepData.config_id}:true|filter: $select.search" sortable="true">{{sweep.display_name}}</ui-select-choices>
							</ui-select>
							<span class="input-group-btn">
								<button type="button" ng-click="test.sweeps[sweepName].data = []" class="btn btn-default btn-sm" ng-disabled="lock">
									<span class="glyphicon glyphicon-trash"></span>
								</button>
								<button type="button" ng-click="selectAll(test, sweepData)" class="btn btn-default btn-sm" ng-disabled="lock" ng-if="sweepData.config_id != 19">
									<span class="glyphicon glyphicon-check"></span>
								</button>
								<button class="btn btn-default btn-sm" ng-click="extras(test, sweepData)" ng-disabled="lock" ng-if="sweepData.config_id != 19">
									<span class="glyphicon glyphicon-plus"></span>
								</button>
							</span>
						</div>
						<span ng-if="test.sweeps[sweepName].data.ext">
							<input ng-if="sweepData.config_id != 19" uib-popover="Numbers,separated by comma (60, 70, -80)" popover-trigger="'mouseenter'" type="text" class="form-control btn-crud" ng-model="test.sweeps[sweepName].ext" placeholder="Extra {{sweepName}}" style="width: 100%;" ng-disabled="lock" ng-disabled="lock">
<!--							<input ng-if="sweepData.config_id == 19" uib-popover="Excel Path" popover-trigger="'mouseenter'" type="text" class="form-control btn-crud" ng-model="test.sweeps[sweepName].ext" placeholder="Filer4 Path" style="width: 100%;" ng-disabled="lock" ng-disabled="lock">-->
						</span>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-md-8">
				<div class="panel-body" ng-disabled="lock">
					<span class="label label-primary">Notes:</span>
					<div trumbowyg-ng placeholder="Test Notes" ng-model="test.notes" editor-config="{btns: ['viewHTML', ['undo', 'redo'],['strong', 'em', 'del'], ['link'], ['formatting'], ['foreColor', 'backColor'], ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull'], ['unorderedList', 'orderedList'], ['removeformat'],]}">
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-12">
			<button class="btn btn-xs btn-default addButton" ng-click="showCalc()" ng-disabled="lock" ng-if="false">
			Time Calculater
		</button>
			<button class="btn btn-xs btn-info addButton" ng-click="insertTest()" ng-disabled="lock">
			Insert!
		</button>
			<button class="btn btn-xs btn-warning addButton" ng-click="editToggle()">
			Edit!
		</button>
			<span class="form-inline">
			<div class="form-group">
				<input type="number" ng-model="copyId" class="form-control" id="copy" placeholder="Test ID">
			</div>
			<button type="submit" class="btn btn-default" ng-click="copyTest()">Copy</button>
		</span>
		</div>
	</div>
</div>
	<hr/>